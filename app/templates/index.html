<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>百家樂預測系統</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.4.1/socket.io.min.js"></script>
</head>
<body>
    <div class="container-fluid mt-3">
        <h1 class="text-center mb-4">百家樂 AI 預測與算牌系統</h1>
       
        <!-- 模式選擇 -->
        <div class="card mb-3">
            <div class="card-header">
                <h5>操作模式</h5>
            </div>
            <div class="card-body">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="mode" id="manual-mode" value="manual" checked>
                    <label class="form-check-label" for="manual-mode">手動模式 (AI預測+算牌公式)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="mode" id="api-mode" value="api">
                    <label class="form-check-label" for="api-mode">API模式 (接收外部資料)</label>
                </div>
            </div>
        </div>
       
        <!-- 手動模式設定 -->
        <div id="manual-settings" class="card mb-3">
            <div class="card-header">
                <h5>手動模式設定</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <div class="input-group">
                            <span class="input-group-text">百家樂網站URL:</span>
                            <input type="text" id="url-input" class="form-control" value="https://example.com/baccarat">
                            <button id="connect-btn" class="btn btn-primary">連線網站</button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div id="status-label" class="alert alert-secondary">狀態: 未連線</div>
                    </div>
                </div>
            </div>
        </div>
       
        <!-- API模式設定 -->
        <div id="api-settings" class="card mb-3" style="display: none;">
            <div class="card-header">
                <h5>API模式設定</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-3">
                        <div class="input-group">
                            <span class="input-group-text">API埠:</span>
                            <input type="text" id="api-port" class="form-control" value="8000">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <button id="setup-api-btn" class="btn btn-primary">設定公共API</button>
                    </div>
                    <div class="col-md-6">
                        <div id="api-status" class="alert alert-secondary">API狀態: 未設定</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-9">
                        <div class="input-group">
                            <span class="input-group-text">回撥URL:</span>
                            <input type="text" id="api-url" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <button id="copy-url-btn" class="btn btn-secondary">複製URL</button>
                    </div>
                </div>
            </div>
        </div>
       
        <!-- 主要操作區域 -->
        <div class="row">
            <!-- 左側控制面板 -->
            <div class="col-md-4">
                <!-- 牌靴管理 -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>牌靴管理</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">牌靴設定</label>
                            <div class="input-group">
                                <span class="input-group-text">副數:</span>
                                <input type="number" id="deck-count" class="form-control" value="8" min="1" max="12">
                                <button id="reset-shoe-btn" class="btn btn-primary">重置牌靴</button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="alert alert-info">
                                剩餘牌數: <span id="cards-remaining">416</span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">當前機率:</label>
                            <div class="row">
                                <div class="col-4">
                                    <div class="alert alert-danger text-center">
                                        莊家: <span id="banker-prob">45.5%</span>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="alert alert-primary text-center">
                                        閒家: <span id="player-prob">44.9%</span>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="alert alert-success text-center">
                                        和局: <span id="tie-prob">9.6%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               
                <!-- AI 預測與算牌公式 -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">AI 預測</div>
            <div class="card-body">
                <div class="mb-3">
                    <button id="train-btn" class="btn btn-primary">訓練模型</button>
                    <button id="predict-btn" class="btn btn-info ms-2">預測下一局</button>
                </div>
                <div id="ai-prediction" class="alert alert-light">
                    尚未進行預測
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">算牌公式預測</div>
            <div class="card-body">
                <div id="formula-prediction" class="alert alert-light">
                    尚未進行預測
                </div>
                <!-- 新增牌型頻率、優劣勢牌值、赫茲結果 -->
                <div class="mt-3">
                    <h6>牌型頻率分析</h6>
                    <div class="row">
                        <div class="col-md-4">
                            <p>莊家頻率: <span id="banker-frequency">0</span></p>
                        </div>
                        <div class="col-md-4">
                            <p>閒家頻率: <span id="player-frequency">0</span></p>
                        </div>
                        <div class="col-md-4">
                            <p>和局頻率: <span id="tie-frequency">0</span></p>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <h6>優劣勢牌值</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p>莊家優勢: <span id="banker-advantage">0</span></p>
                        </div>
                        <div class="col-md-6">
                            <p>閒家優勢: <span id="player-advantage">0</span></p>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <h6>赫茲結果</h6>
                    <div id="hertz-result" class="alert alert-secondary">
                        尚未計算
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 新增牌型輸入區域 -->
<div class="card mb-4">
    <div class="card-header">牌型輸入</div>
    <div class="card-body">
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">莊家牌型:</label>
                <input type="text" id="banker-cards" class="form-control" placeholder="例如: 1 3 10 (A 3 10)">
                <small class="form-text text-muted">請用空格分隔牌值，A=1, J=11, Q=12, K=13</small>
            </div>
            <div class="col-md-6">
                <label class="form-label">閒家牌型:</label>
                <input type="text" id="player-cards" class="form-control" placeholder="例如: 5 7 (5 7)">
                <small class="form-text text-muted">請用空格分隔牌值，A=1, J=11, Q=12, K=13</small>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <button id="calculate-formula-btn" class="btn btn-primary">計算公式結果</button>
                <button id="add-with-cards-btn" class="btn btn-success ms-2">新增結果 (含牌型)</button>
            </div>
        </div>
    </div>
</div>


             
                <!-- 統計資料 -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>統計資料</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-6">
                                <div class="alert alert-secondary">
                                    總局數: <span id="total-rounds">0</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="alert alert-secondary">
                                    AI預測準確率: <span id="ai-accuracy">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div class="alert alert-secondary">
                                    公式預測準確率: <span id="formula-accuracy">0%</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="alert alert-secondary">
                                    AI與公式匹配率: <span id="match-rate">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           
            <!-- 右側顯示區域 -->
            <div class="col-md-8">
                <!-- 結果輸入 -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>結果輸入</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <button id="banker-btn" class="btn btn-danger btn-lg w-100">莊家</button>
                            </div>
                            <div class="col-md-4">
                                <button id="player-btn" class="btn btn-primary btn-lg w-100">閒家</button>
                            </div>
                            <div class="col-md-4">
                                <button id="tie-btn" class="btn btn-success btn-lg w-100">和局</button>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <button id="undo-btn" class="btn btn-warning w-100">撤銷上一局</button>
                            </div>
                            <div class="col-md-6">
                                <button id="clear-btn" class="btn btn-secondary w-100">清空所有記錄</button>
                            </div>
                        </div>
                    </div>
                </div>
               
                <!-- 百家樂路單 -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>百家樂路單</h5>
                    </div>
                    <div class="card-body">
                        <div id="road-map" class="road-map">
                            <div class="text-center py-5">尚無遊戲記錄</div>
                        </div>
                    </div>
                </div>
               
                <!-- 歷史記錄 -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>歷史記錄</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>局數</th>
                                        <th>結果</th>
                                        <th>時間</th>
                                        <th>預測</th>
                                    </tr>
                                </thead>
                                <tbody id="history-table">
                                    <!-- 歷史記錄將在這裡動態新增 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

